<div class="container">
  <h1>Workout Tracker</h1>
  <br />
  <h3>
    <span [ngClass]="daysSinceWorkoutClass()"
      >{{ daysSinceLastWorkout }} Days Since Last Workout
    </span>
  </h3>
  <br />
  <table class="table table-striped table-hover table-dark" *ngIf="!selected">
    <thead class="">
      <tr>
        <td>Id</td>
        <td>Date</td>
        <td>Notes</td>
        <td>Mood</td>
        <td>Delete</td>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of workouts">
        <td>{{ item.id }}</td>
        <td (click)="displayWorkout(item)">
          {{ item.date | date : "shortDate" }}
        </td>
        <td (click)="displayWorkout(item)">{{ item.notes }}</td>
        <td (click)="displayWorkout(item)">{{ item.mood }}</td>

        <td>
          <button
            class="btn btn-outline-danger"
            (click)="deleteWorkout(item.id)"
          >
            X
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <form
    class="table table-striped table-hover"
    name="newTodoForm"
    *ngIf="!selected"
  >
    <hr />
    <label for="newWorkoutNotes">New Workout Notes</label>
    <input
      class="form-control"
      type="text"
      name="newWorkoutNotes"
      [(ngModel)]="newWorkout.notes"
    />
    <label for="newWorkoutMood">Mood:</label>
    <input
      class="form-control"
      type="number"
      min="0"
      max="10"
      name="newWorkoutMood"
      [(ngModel)]="newWorkout.mood"
    />
    <br />
    <input
      class="btn btn-outline-success"
      type="submit"
      value="Add Workout"
      (click)="addWorkout(newWorkout)"
    />
  </form>
  <div name="details" *ngIf="selected && !editWorkout">
    <button class="btn btn-outline-success" (click)="removeWorkout()">
      Display Workouts
    </button>
    <br />
    <table class="table table-striped table-dark table-hover">
      <thead class="">
        <tr>
          <td>Id:</td>
          <td>Date:</td>
          <td>Notes:</td>
          <td>Mood:</td>
          <td>Edit:</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ selected.id }}</td>

          <td>{{ selected.date | date : "shortDate" }}</td>

          <td>{{ selected.notes }}</td>

          <td>{{ selected.mood }}</td>
          <td>
            <button class="btn btn-success" (click)="setEditWorkout()">
              Edit
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <button (click)="newExerciseForm = true" class="btn btn-outline-success">
      Add New Exercise
    </button>
    <div *ngIf="newExerciseForm">
      <form class="table table-striped table-hover" name="editTodoForm">
        <label for="name">Name:</label>

        <input
          class="form-control"
          type="text"
          name="name"
          [(ngModel)]="newExercise.name"
        />
        <label for="weight">Weight:</label>
        <input
          class="form-control"
          type="number"
          name="weight"
          [(ngModel)]="newExercise.weight"
        />
        <label for="sets">Sets:</label>
        <input
          class="form-control"
          type="number"
          name="sets"
          [(ngModel)]="newExercise.sets"
        />
        <label for="raps">Reps:</label>
        <input
          class="form-control"
          type="number"
          name="reps"
          [(ngModel)]="newExercise.reps"
        />
        <label for="description">Description:</label>
        <input
          class="form-control"
          type="text"
          name="description"
          [(ngModel)]="newExercise.description"
        />
        <input
          class="btn btn-success"
          type="submit"
          value="Create"
          (click)="createExercise(newExercise, selected.id)"
        />
        ||
        <input
          class="btn btn-danger"
          type="submit"
          value="Cancel"
          (click)="newExerciseForm = false"
        />
      </form>
    </div>
    <h2 *ngIf="!exerciseExists()">No Exercises Associated With This Workout</h2>
    <div *ngIf="exerciseExists()">
      <h2>Exercises:</h2>
      <table
        class="table table-striped table-dark table-hover"
        *ngIf="!editExercise"
      >
        <thead class="Exercises">
          <tr>
            <td>Name:</td>
            <td>Weight:</td>
            <td>Sets:</td>
            <td>Reps:</td>
            <td>Description:</td>
            <td>Edit:</td>
            <td>Delete:</td>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let exercise of selected.exercises | exerciseRemoved">
            <td>{{ exercise.name }}</td>
            <td>{{ exercise.weight }}</td>
            <td>{{ exercise.sets }}</td>
            <td>{{ exercise.reps }}</td>
            <td>{{ exercise.description }}</td>
            <td>
              <button
                class="btn btn-success"
                (click)="setEditExercise(exercise)"
              >
                Edit
              </button>
            </td>
            <td> <button
              class="btn btn-outline-danger"
              (click)="deleteExercise(exercise.id)"
            >
              X
            </button></td>
          </tr>
        </tbody>
      </table>
    </div>
    <form
      class="table table-striped table-hover"
      name="editTodoForm"
      *ngIf="editExercise"
    >
      <label for="name">Name:</label>

      <input
        class="form-control"
        type="text"
        name="name"
        [(ngModel)]="editExercise.name"
      />
      <label for="weight">Weight:</label>
      <input
        class="form-control"
        type="number"
        name="weight"
        [(ngModel)]="editExercise.weight"
      />
      <label for="sets">Sets:</label>
      <input
        class="form-control"
        type="number"
        name="sets"
        [(ngModel)]="editExercise.sets"
      />
      <label for="raps">Reps:</label>
      <input
        class="form-control"
        type="number"
        name="reps"
        [(ngModel)]="editExercise.reps"
      />
      <label for="description">Description:</label>
      <input
        class="form-control"
        type="text"
        name="description"
        [(ngModel)]="editExercise.description"
      />
      <input
        class="btn btn-success"
        type="submit"
        value="Save"
        (click)="updateExercise(editExercise)"
      />
      ||
      <input
        class="btn btn-danger"
        type="submit"
        value="Cancel"
        (click)="removeEditExercise()"
      />
    </form>
  </div>
  <form
    class="table table-striped table-hover"
    name="editTodoForm"
    *ngIf="editWorkout"
  >
    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <td>Notes:</td>
        <td>Mood:</td>
        <td>Save:</td>
        <td>Cancel:</td>
      </thead>
      <tbody>
        <tr>
          <td>
            <input
              class="form-control"
              type="text"
              name="task"
              [(ngModel)]="editWorkout.notes"
            />
          </td>
          <td>
            <input
              class="form-control"
              type="number"
              name="description"
              min="0"
              max="10"
              [(ngModel)]="editWorkout.mood"
            />
          </td>
          <td>
            <input
              class="btn btn-success"
              type="submit"
              value="Save"
              (click)="updateWorkout(editWorkout)"
            />
          </td>
          <td>
            <input
              class="btn btn-danger"
              type="submit"
              value="Cancel"
              (click)="removeEditWorkout()"
            />
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div>
